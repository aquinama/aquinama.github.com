YUI().use("event","aquinama-datacontroller","aquinama-revolretrieve","aquinama-literal","aquinama-search","aquinama-list","aquinama-tools","history-hash",function(c){var b={},f='El buscador de anuncios *F&aacute;cil y R&aacute;pido*</br></br><img src="assets/images/patineta.png" title="Una patineta seg&uacute;n Franklin ...">',e='Usted est&aacute; usando una versi&oacute;n antigua de Internet Explorer. Algunas funcionalidades podr&iacute;an no funcionar correctamente.</br>Actual&iacute;celo por un <a href="http://browser-update.org/es/update.html" target="_blank">navegador moderno</a>.',d='Puedes usarlo Online o <span>Local en tu PC</span>.<img src="assets/images/flecha.png" title="Buscas menos, encuentras mas"><div id="yui3-aquinama-all-download"><a href="app/aquinama.rar" target="_blank" title="Solo 0.3MB"><div id="yui3-aquinama-download-content"><img src="assets/images/download.png" alt="Descargar"><span>Descargar</span></div></a><div class="megas">Solo 0.3MB</div></div>',a=c.one("#yui3-aquinama-all-desc");b.errorMessage=function(){var g=c.one(".error-message").set("innerHTML",e)};if(c.UA.ie>0&&c.UA.ie<9){b.errorMessage()}b.tree=appTree;b.model=appTree;b.error=error;b.history=new c.History({initialState:{act:"init"}});b.interestView=function(){b.busqueda.deselect();b.interest.get("contentBox").addClass("yui3-aquinama-interest-focus");c.one("#yui3-aquinama-news").addClass("yui3-aquinama-hidden");c.one("#yui3-aquinama-list").removeClass("yui3-aquinama-hidden");b.list.showLoad();b.list.set("emodellist",b.datacontroller.get("interest"));b.filter.set("source",b.list.source());b.filter.clear();b.filter.sendRequest();b.search.setCategory("Me Interesan");c.one("#yui3-aquinama-error").set("innerHTML","")};b.mainView=function(){c.one(".loading-main").addClass("yui3-aquinama-hidden");c.one(".loading-main2").addClass("yui3-aquinama-hidden");a.addClass("graylow");a.setHTML(f);c.one("#yui3-aquinama-all-desc2").setHTML(d)};b.initView=function(){c.one("#yui3-aquinama-news").removeClass("yui3-aquinama-hidden");c.one("#yui3-aquinama-list").addClass("yui3-aquinama-hidden");b.interest.deselect();b.busqueda.get("contentBox").addClass("yui3-aquinama-interest-focus");b.search._clearSearch();b.search._syncSearch()};b.searchView=function(i){var g=b.datacontroller.get("latestSearch"),h=g.size();b.interest.deselect();b.busqueda.get("contentBox").addClass("yui3-aquinama-interest-focus");if(b.search.get("lastaselect")){b.search.searchCategory(b.search.get("lastaselect"))}else{b.initView()}};b.Search=function(h){var g=h.filter;c.one("#yui3-aquinama-news").addClass("yui3-aquinama-hidden");c.one("#yui3-aquinama-list").removeClass("yui3-aquinama-hidden");b.list.changeMoreTex("Ver mas resultados");b.list.clearList();c.log("Estoy en el filtro");c.log(g);b.filter.clear();if(g[0].value!=="Me Interesan"){b.history.add({category:g[0].value,act:"search"})}b.interest.deselect();b.busqueda.get("contentBox").addClass("yui3-aquinama-interest-focus");b.list.showLoad();b.datacontroller.resetList();if(g[0].attr==="text"&&g[0].value==="Me Interesan"){b.interestView()}else{b.datacontroller.getData(g);b.interest.deselect()}c.one("#yui3-aquinama-error").set("innerHTML","")};b.Error=function(i){if(i.data.error.code===2){var h=b.search.get("aselect"),g=b.tree[b.search.get("aselect")];if(g){h=g.name}b.list.changeMoreTex(b.error[2].msg+" "+b.filter.get("query")+" "+b.list.getActiveTags()+" en "+h);b.list.hideLoad()}else{c.one("#yui3-aquinama-error").set("innerHTML","<p>"+b.error[i.data.error.code].msg)+"</p>";c.one("#yui3-aquinama-list").addClass("yui3-aquinama-hidden");b.search.clearSearch()}};b.categoryRetrieve=function(h){var g={};b.list.set("atotal",b.datacontroller.get("search.total"));b.list.set("emodellist",h.data);b.filter.set("source",b.list.source());b.filter.sendRequest();g=b.datacontroller.tags(b.search.get("aselect"));b.list.set("tags",g);b.filter.set("tags",g);b.filter.set("afilter",{});c.one("#yui3-aquinama-error").set("innerHTML","")};b.tagsHandle=function(g){b.filter.afilterPopulate(g.data);b.filter.sendRequest(b.filter.get("value"))};b.moreDataControllerHandle=function(g){b.list.set("emodellist",g.data);b.filter.set("source",b.list.source());b.filter.sendRequest(b.filter.get("query"))};b.Filter=function(g){b.list.set("evisiblelist",g.results)};b.Sort=function(g){b.filter.set("source",b.list.source());b.filter.sendRequest()};b.InterestMe=function(g){b.datacontroller.addInterest(g.model);b.interest.set("acount",b.datacontroller.get("interest").size())};b.NoInterestMe=function(g){b.datacontroller.notInterest(g.model);b.interest.set("acount",b.datacontroller.get("interest").size())};b.articleData=function(g){b.datacontroller.getData(g.data)};b.moreListHandle=function(g){b.datacontroller.more()};b.scrollDown=function(h){var g=b.body.scrollInfo.getOffscreenNodesBottom("li.yui3-aquinama-item");if(g.size()<20){b.list.moveItemsDown()}};b.search=new c.AquiNaMa.Search({boundingBox:"#yui3-aquinama-search",contentBox:"#yui3-aquinama-search div",acategorys:b.tree});b.search.render();b.datacontroller=new c.AquiNaMa.DataController({model:b.model});b.list=new c.AquiNaMa.List({boundingBox:"#yui3-aquinama-list"});b.list.render("#yui3-aquinama-left");b.interest=new c.AquiNaMa.Interest({acount:b.datacontroller.get("interest").size(),boundingBox:c.one(".yui3-aquinama-interest"),contentBox:c.one(".yui3-aquinama-interest")});b.busqueda=new c.AquiNaMa.Busqueda({boundingBox:c.one(".yui3-aquinama-busqueda"),contentBox:c.one(".yui3-aquinama-busqueda")});b.interest.render();b.busqueda.render();b.filter=new c.AquiNaMa.Filter({inputNode:b.search.get("contentBox").one(".yui3-aquinama-search-filter"),minQueryLength:0,queryDelay:300,resultTextLocator:"tags",});b.filter.set("source",b.list.source());b.body=c.one("body");b.body.plug(c.Plugin.ScrollInfo);c.on("aquinama-search:search",b.Search);b.filter.on("results",b.Filter);c.on("aquinama-list:sort",b.Sort);c.on("aquinama-list:tags",b.tagsHandle);c.on("aquinama-datacontroller:categoryRetrieve",b.categoryRetrieve);c.on("aquinama-datacontroller:more",b.moreDataControllerHandle);c.on("aquinama-datacontroller:error",b.Error);c.on("aquinama-item:interest",b.InterestMe);c.on("aquinama-item:no-interest",b.NoInterestMe);c.on("aquinama-articlemodel:articleData",b.articleData);c.on("aquinama-list:more",b.moreListHandle);c.on("history:change",b.historyHandle,this);b.body.scrollInfo.on("scrollDown",b.scrollDown);c.on("aquinama-search:clear",function(g){b.list.get("boundingBox").addClass("yui3-aquinama-hidden");c.one("#yui3-aquinama-news").removeClass("yui3-aquinama-hidden");b.interest.deselect();b.list.clearList();b.busqueda.get("contentBox").addClass("yui3-aquinama-interest-focus");b.history.add({act:"init",category:null})});c.one(".yui3-aquinama-interest").on("click",function(g){b.interestView();b.history.add({act:"interest"})});c.one(".yui3-aquinama-busqueda").on("click",function(g){b.searchView({});b.history.addValue("act","search")});c.on("history:change",function(h){var i=h.changed,g=h.removed;if(h.src===c.HistoryHash.SRC_HASH){if(i.act){if(i.act.newVal==="interest"){c.log("Me interesa");b.interestView()}else{if(i.act.newVal==="init"){c.log("inicio");b.initView()}else{if(i.act.newVal==="search"){c.log("search");b.searchView()}}}}if(i.category){c.log("cambio una categoria");b.interest.deselect();b.busqueda.get("contentBox").addClass("yui3-aquinama-interest-focus");b.search.searchCategory(i.category.newVal)}}});b.routing=function(){var g=c.HistoryHash.parseHash();if(g.act==="init"){}else{if(g.act==="interest"){b.interestView();b.history.add({act:"interest"})}else{if(g.act==="search"){if(g.category){b.search.searchCategory(g.category)}else{b.history.replace({act:"init"});b.initView()}}else{b.initView()}}}};b.routing();b.mainView();c.one(".go-top").on("click",function(g){window.scrollTo(0,0)})});