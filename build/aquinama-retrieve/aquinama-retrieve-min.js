YUI.add("aquinama-retrieve",function(A){A.namespace("AquiNaMa");var F="CategoryRetrieve no ha retornado ningun dato",G="_categoryRetrieve",K="_articleRetrieve",H="categoryRetrieve",B="articleRetrieve",J="more",L="activeRetrieve:error",C="model",D="error",E="attr",I=A.Base.create("aquinama-retrieve",A.Base,[],{initializer:function(N){var M=this;M.set(C,N.model);M._publishEvents();M._bind();},articleFormat:function(M){return M;},categoryFormat:function(M){return M;},_publishEvents:function(){var M=this;M.publish(H,{emitFacade:true,broadcast:1});M.publish(J,{emitFacade:true,broadcast:1});M.publish(B,{emitFacade:true,broadcast:1});M.publish(D,{emitFacade:true,broadcast:1});},_bind:function(){var M=this;M.on(G,M._categoryRetrieveHandle,M);M.on(K,M._articleRetrieveHandle,M);M.fire("_bind");},_categoryRetrieveHandle:function(P){var N=this,O,M;O=N.get(C).getAttr("data",P);if(O){M=N.categoryParse(O);M=N.categoryFormat(M);if(M&&N.get(J)){N.fire("activeRetrieve:more",{data:{result:M,filter:O.filter}});}else{if(M){N.fire("activeRetrieve:categoryRetrieve",{data:{result:M,filter:O.filter,search:{totalArticles:N.get("totalArticle")}}});}}}else{N.fire(L,{data:{error:F}});}},_articleRetrieveHandle:function(P){var N=this,O=P.data,M;M=N.articleParse(O);M=N.articleFormat(M);N.fire("activeRetrieve:articleRetrieve",{data:M,filter:O.filter});},getData:function(R){var N=this,M,O,Q=R.length,P=0,S;N.set("actualFilter",R);if(Q>0){O=R[0].attr;if(O!="category"&&O!="article"){N.defaultFilter(R);}else{for(P=0;P<Q;P++){S=R[P];M=N.get(C).getAttr(E,S);if(M){if(N[M]){N[M](S.value,R);}else{}}else{}}}}else{}},againRetrieveData:function(O,N){if(O.actual<O.max){var M=this;O.actual++;N.repeat=O;A.later(2000,A,function(P){M.retrieveData(N);});return true;}return false;}},{ATTRS:{model:{value:{}},actualFilter:{value:{}},totalArticle:{value:1000},more:{value:false}}});A.AquiNaMa.Retrieve=I;},"@VERSION@",{skinnable:false,requires:["base"]});