YUI.add("aquinama-revolretrieve",function(E){E.namespace("AquiNaMa");var C="activeRetrieve:error",A="urlBase",B="model",D="more",F=E.Base.create("aquinama-revolretrieve",E.AquiNaMa.UrlRetrieve,[],{initializer:function(G){},categoryParse:function(O){var P=this,S=new E.ModelList(),L,G=new Date("Jan 16 1988"),I=1000,M,H,Q,J,R,N;try{M=P.get(B).getAttr("tr",O.result);if(M){R=M.length;for(J=0;J<R;J++){Q=M[J];H=P.get(B).getAttr("td",Q);if(H){N=H["class"];if(N=="adsterix_head"){G=P.categoryDateParse(H.p);}else{if(!H.hasOwnProperty("div")&&N!="space"){L=P.articleOutParse(Q,G,I);if(L){S.add(L);I--;}}}}else{}}P.categoryPagesCountParse(O);}else{P.fire(C,{data:{error:"No fue encontrado ningun articulo"}});}}catch(K){return S;}return S;},categoryPagesCountParse:function(I){var G=this,J=0,H;if(!G.get(D)){H=G.get(B).getAttr("a",I.result);if(H){J=H[1].content;J=J.split(" ");J=J[J.length-1];J=parseInt(J);G.set("totalArticle",J);J=J/100;if(J>0){J=Math.ceil(J);}}else{J=0;}G.set("totalPages",J);}},articleParse:function(L){var I=this,J=new Date(),M="",H={email:"",name:"",phone:""},G=L.result;try{J=I.articleDateParse(G);M=I.articleDescriptionParse(G);H=I.articleContactParse(G);return{date:J,desc:M,contact:H};}catch(K){}return{date:J,desc:M,contact:H};},articleDateParse:function(I){var G=this,H,J=I.div[0].div;if(E.Lang.isArray(J)){H=G.categoryDateParse(J[1].span[1].content);}else{if(J.span[1].content){H=G.categoryDateParse(J.span[1].content);}else{return false;}}return H;},articleDescriptionParse:function(H){var I="";try{I=H.span.content;return I;}catch(G){}return I;},articleContactParse:function(K){var I=this,H,G={email:"",phone:"",name:""};try{H=K.div[1].div;if(E.Lang.isArray(H)){E.each(H,function(L){G=I.articleOneContactParse(L,G);});}else{G=I.articleOneContactParse(H,G);}return G;}catch(J){}return G;},articleOneContactParse:function(H,G){var J=H.span[0].content,I=H.span[1];J=J.split(":");J=J[0];switch(J){case"Email":G.email=I.a.content;break;case"Nombre":G.name=I.content;break;default:G.phone=I.content;break;}return G;},articleOutParse:function(N,I,J){var O=this,K="",L="",G="",P,H;try{H=N.td.a;K=H.content;G=H.href;if(K===undefined||G===undefined){throw new Error("tittle or href propertys are undefined");}else{if(H.hasOwnProperty("span")){L=O.priceParse(H.span);}else{L=0;}G=[O.get(A),G];G=G.join("");I=new Date(I.setMilliseconds(J));P=new E.AquiNaMa.ArticleModel({interest:false,idAttribute:"href",open:false,load:false,tittle:K,price:L,href:G,date:I,number:J,highlight:K,retrieve:"RevolRetrieve"});O.addTarget(P);return P;}}catch(M){}return false;},categoryDateParse:function(I){var H=this,G=false,M,K,L,J;try{I=I.split(" ");J=I.length;L=I[5].split(",");G=H.get("date")[I[3]]+" "+I[1]+" "+L[0];G=new Date(G);if(J>6){M=I[J-2].split(":");K=M[1];M=parseInt(M[0]);if(I[J-1]=="PM"){M+=12;}G.setHours(M);G.setMinutes(K);}return G;}catch(N){}return G;},priceParse:function(G){try{G=G.split(" ");G=G[0].replace(",","");G=parseFloat(G);if(!E.Lang.isNumber(G)){throw new Error("El precio debe ser un numero");}else{return G;}}catch(H){return 0;}},text:function(H,G){H=escape(H);return"searchtext="+H+"&";},min:function(G,H){return"min_price="+G+"&";},max:function(G,H){return"max_price="+G+"&";},nextUrl:function(I,G,H){var J=["pagina-",I,".html?"];J=J.join("");if(H[0].attr!="category"&&H[0].attr!="article"){J="/"+J;J=G.replace(".html/?",J);}else{J=G.replace("?",J);}return J;}},{ATTRS:{}});E.AquiNaMa.RevolRetrieve=F;},"@VERSION@",{skinnable:false,requires:["base","yql","model-list","aquinama-articlemodel","datatype-date","aquinama-urlretrieve"]});